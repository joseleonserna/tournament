!function(e){"use strict";const n=e=>'<div class="player-card-column columns is-align-items-center"> <div class="column is-narrow headshot-column is-4"> <img class="headshot " width="147px" src="'+e.mugshot+'" alt=""> </div> <div class="column is-text-left content"> <h1 class="ranking">'+e.ranking+' </h1> <h1 class="player-name"> '+e.name+'</h1> <span> <span class="country country-wrapper is-flex is-align-items-center"> <span class="flag"> <img width="26px" src=" '+e.flag+'"/> </span> <div class="country-name">'+e.country+" </div> </span> </span> </div> </div>",a=e=>'<div class="player-card-column columns is-align-items-center"> <div class="is-narrow column headshot-column is-4"> <img class="headshot" width="147px" src="'+e+'" alt=""> </div> <div class="column not-active player-content is-text-left"> <h1 class="ranking">#000</h1> <h1 class="player-name">Select a player</h1> <span class="is-flex is-align-items-center country country-wrapper"> <span class="flag"> <span class="country-empty"></span> </span> <div class="country-name">Country</div> </span> </div> </div>';jQuery(document).on("click",".show-head-to-head-modal",(function(e){const t=jQuery(this).data("mugshot"),s={id:jQuery(this).data("player1"),name:jQuery(this).data("player1-name"),mugshot:jQuery(this).data("player1-mugshot"),ranking:jQuery(this).data("player1-ranking"),flag:jQuery(this).data("player1-flag"),country:jQuery(this).data("player1-country")},l={id:jQuery(this).data("player2"),name:jQuery(this).data("player2-name"),mugshot:jQuery(this).data("player2-mugshot"),ranking:jQuery(this).data("player2-ranking"),flag:jQuery(this).data("player2-flag"),country:jQuery(this).data("player2-country")},r=`<div class="player-compare"> \n                    <div class="comparison"> \n                        <div class="head"> \n                            <div class="columns is-mobile is-variable is-1"> \n                                <div class="column is-6-desktop is-6-mobile is-text-right player_one_container">\n                                    <select name="player_one" id="player_one" class="player_select player_select_one is-text-right" \n                                        ${s.id&&s.name?'readonly="true" disabled="true"':""}>\n                                        <option data-placeholder="true"></option>\n                                        ${s.id&&s.name&&'<option value="'+s.id+'" selected="selected">'+s.name+"</option>"}\n                                    </select>\n                                </div>\n                                <div class="column is-6-desktop is-6-mobile is-text-left player_two_container">\n                                    <select name="player_two" id="player_two" class="player_select is-text-left"\n                                     ${l.id&&l.name?'readonly="true" disabled="true"':""}\n                                    >\n                                        <option data-placeholder="true"></option>\n                                        ${l.id&&l.name&&'<option value="'+l.id+'" selected="selected">'+l.name+"</option>"}\n                                    </select>\n                                </div>\n                            </div>\n\n                            <div class="columns is-variable is-1 is-mobile mt-5 headshot-columns">\n                                <div class="column is-6-desktop is-6-mobile featured player-headshots is-text-right player-card">\n                                    \n                                    <div class="player-card-wrapper player-one">\n                                        ${s.id&&s.name?n(s):a(t)}\n                                    </div>\n                                    \n                                    <div class="columns player-one-details-loading is-hidden">\n                                        <div class="column mt-5 is-text-center">\n                                            <i class="fa-duotone fa-spinner-third fa-spin"></i>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="column is-6-desktop is-6-mobile featured player-headshots player-card">\n                                    \n                                    <div class="player-card-wrapper player-two">\n                                        ${l.id&&l.name?n(l):a(t)}\n                                    </div>\n                                    <div class="columns player-two-details-loading is-hidden">\n                                        <div class="column mt-5 is-text-center">\n                                            <i class="fa-duotone fa-spinner-third fa-spin"></i>\n                                        </div>\n                                    </div>\n                                    \n                                </div>\n                            </div>\n                        </div>\n                        \n                        <div class="columns details-loading is-hidden">\n                            <div class="column mt-5 is-text-center">\n                                <i class="fa-duotone fa-spinner-third fa-spin"></i>\n                            </div>\n                        </div>\n                        <div id="head-to-head-details">\n                        </div>\n        \n                        <div id="head-to-head-tournaments">\n                        </div>\n                    </div>\n                </div>\n                <script>\n                \n                \n                if(jQuery('#player_one').val() && jQuery('#player_two').val()) {\n                    comparePlayers();\n                }\n                function comparePlayers() {\n                     jQuery(".details-loading").removeClass('is-hidden');\n                     let data = {};\n                    data.playerOne = jQuery('#player_one').val();\n                    data.playerTwo = jQuery('#player_two').val();\n                    if (data.playerOne && data.playerTwo) {\n                         jQuery("#head-to-head-details").html('');\n                         jQuery("#head-to-head-tournaments").html('');\n                        jQuery.post(frontendAjax.ajaxUrl, {\n                            'action': 'handleAjaxFrontend',\n                            'task': 'comparePlayers',\n                            'security': frontendAjax._nonce,\n                            'data': data\n                        }).done(function (response) {\n                            jQuery("#head-to-head-details").html(response.data.details);\n                            jQuery("#head-to-head-tournaments").html(response.data.tournaments)\n                            jQuery(".details-loading").addClass('is-hidden');\n                        }).fail(function (error) {\n                             jQuery(".details-loading").addClass('is-hidden');\n                            alert('Unable to compare. Please try again.');\n                        });\n                    }else {\n                     jQuery(".details-loading").addClass('is-hidden');\n                    }\n                }\n                \n                function getPlayer(playerId, playerElement) {\n                    let data = {};\n                    data.player = playerId;\n                    const element = playerElement;\n                    jQuery(".details-loading").removeClass('is-hidden');\n                    jQuery.post(frontendAjax.ajaxUrl, {\n                        'action': 'handleAjaxFrontend',\n                        'task': 'getPlayer',\n                        'security': frontendAjax._nonce,\n                        'data': data\n                    }).done(function (response) {\n                        const playerTwo = response.data.player;\n                        const ranking = playerTwo.rankings['World Ranking'] ?? 0;\n                        jQuery(element + ' .ranking').html('#' + ranking.padStart(3, "0"));\n                        jQuery(element + ' .player-name').html(playerTwo.name);\n                        jQuery(element + ' .flag').html('<img width="26px" src="' + playerTwo.flag + '"/>');\n                        jQuery(element + ' .country-name').html(playerTwo.country);\n                        jQuery(element + ' .headshot').attr('src', playerTwo.mugshot);\n                        jQuery(element + ' .player-content').removeClass('not-active');\n                        comparePlayers();\n                    }).fail(function (error) {\n                    });\n                }\n\n                document.querySelectorAll('#player_one:not([data-ssid])').forEach(e => {\n                let source = 'https://psa-api.ptsportsuite.com/players';\n                new SlimSelect({\n                    select: e,\n                    placeholder: 'Search for a player',\n                    onChange: (playerTwo) => {\n                        getPlayer(playerTwo.value, '.player-one');\n                    },\n                    ajax: function (search, callback) {\n                        if (search.length < 3) {\n                            callback('Need 3 characters')\n                            return\n                        }\n        \n                        fetch(source)\n                            .then(function (response) {\n                                return response.json()\n                            })\n                            .then(function (json) {\n                                let data = []\n                                for (let i = 0; i < json.length; i++) {\n                                    data.push({text: String(json[i]['Name']), value: String(json[i]['Id'])})\n                                }\n        \n                                callback(data)\n                            })\n                            .catch(function (error) {\n                                callback(false)\n                            })\n                    }\n                })\n            });\n\n\n            document.querySelectorAll('#player_two:not([data-ssid])').forEach(e => {\n                let source = 'https://psa-api.ptsportsuite.com/players';\n                new SlimSelect({\n                    select: e,\n                    placeholder: 'Search for a player',\n                    onChange: (playerTwo) => {\n                        getPlayer(playerTwo.value, '.player-two');\n                    },\n                    ajax: function (search, callback) {\n                        // Check search value. If you dont like it callback(false) or callback('Message String')\n                        if (search.length < 3) {\n                            callback('Need 3 characters')\n                            return\n                        }\n        \n                        // Perform your own ajax request here\n                        fetch(source)\n                            .then(function (response) {\n                                return response.json()\n                            })\n                            .then(function (json) {\n                                let data = []\n                                for (let i = 0; i < json.length; i++) {\n                                    data.push({text: String(json[i]['Name']), value: String(json[i]['Id'])})\n                                }\n        \n                                // Upon successful fetch send data to callback function.\n                                // Be sure to send data back in the proper format.\n                                // Refer to the method setData for examples of proper format.\n                                callback(data)\n                            })\n                            .catch(function (error) {\n                                // If any erros happened send false back through the callback\n                                callback(false)\n                            })\n                    }\n                })\n            });\n<\/script>`;showModal("Player Comparison",r,{confirmText:"",id:"playerCompareModal"})}))}(jQuery);