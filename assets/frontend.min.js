!function(e){"use strict";class t{title;content;id;persistent=!1;dismissible=!0;confirmText="OK";cancelText=!1;_element;onCancel;onConfirm;constructor(e,t,a){this.title=e,this.content=t,this.id=a.id??"modal-"+Math.random().toString(36).substring(7),this.persistent=a.persistent??!1,this.dismissible=a.dismissible??!0,this.confirmText=a.confirmText??"OK",this.cancelText=a.cancelText??!1,this.onCancel=a.onCancel??(()=>{}),this.onConfirm=a.onConfirm??(()=>{})}el(){return!this._element&&e(`#${this.id}`).length&&(this._element=e(`#${this.id}`)),this._element||(this._element=e(`\n                    <div class="modal" id="${this.id}">\n                      <div class="modal-background"></div>\n                      <div class="modal-card">\n                        <header class="modal-card-head">\n                          <p class="modal-card-title">${this.title}</p>\n                          ${this.dismissible?'<button class="delete" data-cancel="true" aria-label="close"><i class="fa-sharp fa-solid fa-xmark"></i>></button>':""}\n                        </header>\n                        <section class="modal-card-body">\n                          ${this.content}\n                        </section>\n                        <footer class="modal-card-foot is-justify-content-end">\n                          ${this.confirmText?`<button class="button is-success" data-confirm="true">${this.confirmText}</button>`:""}\n                          ${this.cancelText?`<button class="button is-secondary is-outlined" data-cancel="true">${this.cancelText}</button>`:""}\n                        </footer>\n                      </div>\n                    </div>\n                `),e("body").append(this._element)),this._element}show(){return this.el().addClass("is-active"),new Promise(((e,t)=>{this.el().find('[data-cancel="true"]').on("click",(async()=>{!1!==await this.onCancel(this)&&(await this.hide(),e(!1))})),this.el().find('[data-confirm="true"]').on("click",(async()=>{!1!==await this.onConfirm(this)&&(await this.hide(),e(!0))})),this.dismissible&&this.el().find(".modal-background").on("click",(async()=>{!1!==await this.onCancel(this)&&(await this.hide(),e(!1))}))}))}hide(){this.persistent?this.el().removeClass("is-active"):(this.el().remove(),this._element=null)}}function a(e){let t,a,n=window.location.search.substring(1).split("&");for(a=0;a<n.length;a++)if(t=n[a].split("="),t[0]===e)return void 0===t[1]||decodeURIComponent(t[1]);return!1}window.showModal=function(e,a,n={}){return new t(e,a,n).show()},jQuery(document).ready((function(){jQuery(document).on("click",".share-icons .share_link",(function(){if(jQuery(this).attr("data-url")){let e=jQuery("<input>");jQuery("body").append(e),e.val(jQuery(this).attr("data-url")).select(),document.execCommand("copy"),alert("Copied link to clipboard!"),e.remove()}}));const e=document.querySelectorAll(".draw .rounds");if(e)for(const t of e){const e=t.querySelectorAll(".round"),a=e[0].querySelectorAll(".match").length;if(a){const n=164;if(n)for(const r of e){const e=r.querySelector(".matches");if(e){const t=e.querySelectorAll(".match").length;let r=(a*n-n*t)/t,s=n/2+r/2;e.style=`height: ${a*n}px; --connector-height: ${s}px; --match-margin-top: 15px; --match-margin-bottom: ${r+15}px;`}for(const e of t.querySelectorAll(".match-player")){const a=e.className.match(/player-\w+/g);a&&t.querySelectorAll(`.${a}`).forEach((e=>{e.addEventListener("mouseover",(()=>{t.querySelectorAll(`.${a}`).forEach((e=>{e.classList.add("hover"),e.classList.contains("winner")&&e.parentElement.parentElement.classList.add("hover-after"),e.parentElement.parentElement.classList.add("hover-before")}))})),e.addEventListener("mouseout",(()=>{t.querySelectorAll(`.${a}`).forEach((e=>{e.classList.remove("hover"),e.parentElement.parentElement.classList.remove("hover-before","hover-after")}))}))}))}}}new Flickity(t,{freeScroll:!0,contain:!0,adaptiveHeight:!0,prevNextButtons:!1,pageDots:!1})}function t(){let e=jQuery(".site-header .player-search-results"),t=document.querySelector(".site-header .player-search input");e.empty(),t.value.length<3?e.append(a("Enter at least 3 characters")):((t.players??[]).filter((e=>!!e.Name&&e.Name.toLowerCase().includes(t.value.toLowerCase()))).forEach((t=>{let a=document.createElement("li"),n=document.createElement("a");n.href="/player/"+t.Name.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,""),n.innerText=t.Name,a.appendChild(n),e.append(a)})),e.is(":empty")&&e.append(a("No players found")))}function a(e){let t=document.createElement("li");t.className="message";let a=document.createElement("a");return a.innerText=e,t.appendChild(a),t}if(jQuery(document).on("click",".new-tabs li > a",(function(e){e.preventDefault();let t=jQuery(this).closest(".new-tabs"),a=t.siblings(".new-tabs-content").first(),n=jQuery(this).attr("href");t.find(".current-menu-item").removeClass("current-menu-item"),jQuery(this).parent().addClass("current-menu-item"),a.find(".new-tab-content").hide(),a.find(n).show(),jQuery(this).blur(),jQuery(".flickity-enabled").flickity(),jQuery(".flickity-enabled").flickity("resize")})),jQuery(document).on("click",".menu-toggle",(function(e){e.preventDefault(),jQuery(this).find(".fa").toggleClass("fa-bars-sort").toggleClass("fa-times"),jQuery("#site-navigation").toggleClass("open")})),jQuery(".tabs").on("click",".tab",(function(e){let t=jQuery(this).parent(".tabs").attr("data-name"),a=jQuery(this).attr("data-id");jQuery(this).parent().find(".tab.active").removeClass("active"),jQuery(this).parent().find('.tab[data-id="'+a+'"]').addClass("active"),"gender_tabs"===t?jQuery(this).parent().parent().parent().find(".tab-content."+t).removeClass("active"):jQuery(document).find(".tab-content."+t).removeClass("active"),jQuery("."+a+"."+t).addClass("active"),jQuery(".flickity-enabled").flickity(),jQuery(".flickity-enabled").flickity("resize")})),jQuery(".search-page").on("keyup",".search-field",(function(e){13==e.keyCode&&jQuery(".search_submit").click()})),jQuery(".search-page").on("click",".load_more",(function(e){e.preventDefault(),jQuery(".load_more").text("Loading...");let t=parseInt(jQuery(this).attr("data-current-page")),a=parseInt(jQuery(this).attr("data-max-pages")),n=parseInt(jQuery(this).attr("data-posts-per-page")),r={type:"search"};r.search=jQuery(".search-page .search-field").val(),r.page=t+1,r.postsPerPage=n,jQuery.post(frontendAjax.ajaxUrl,{action:"handleAjaxFrontend",task:"loadMore",security:frontendAjax._nonce,data:r}).done((function(e){jQuery(e).appendTo(".results-container .articles"),jQuery(".load_more").attr("data-current-page",r.page),r.page>=a?jQuery(".load_more").hide():jQuery(".load_more").text("Load More")})).fail((function(e){r.page>=a&&jQuery(".load_more").hide()}))})),jQuery(document).on("focus",".site-header .player-search input",(function(e){void 0!==this.players&&null!==this.players||(this.players=[]);let n=this;jQuery(n).addClass("loading"),jQuery(".site-header .player-search-results").show(),fetch("https://psa-api.ptsportsuite.com/players").then((function(e){return e.json()})).then((function(e){n.players=e,jQuery(n).removeClass("loading"),t()})).catch((function(e){jQuery(".site-header .player-search-results").append(a("Something went wrong. Please try again later.")),jQuery(n).removeClass("loading")}))})),jQuery(document).on("keyup",".site-header .player-search input",t),jQuery(document).on("click",".site-header .player-search-toggle",(function(e){jQuery(".site-header .player-search").slideToggle(),jQuery(".site-header .player-search input").val(""),jQuery(".site-header .player-search-results").empty().hide()})),jQuery(".countdown_container").length){let e=jQuery(".countdown_container").attr("data-date");e=new Date(e).getTime();let t=setInterval((function(){let a=e-(new Date).getTime();jQuery(".countdown_container .countdown_day").text(Math.floor(a/864e5).toLocaleString("en-ZA",{minimumIntegerDigits:2})),jQuery(".countdown_container .countdown_hour").text(Math.floor(a%864e5/36e5).toLocaleString("en-ZA",{minimumIntegerDigits:2})),jQuery(".countdown_container .countdown_minute").text(Math.floor(a%36e5/6e4).toLocaleString("en-ZA",{minimumIntegerDigits:2})),jQuery(".countdown_container .countdown_second").text(Math.floor(a%6e4/1e3).toLocaleString("en-ZA",{minimumIntegerDigits:2})),a<0&&clearInterval(t)}),1e3)}if(jQuery(".search-page .no-results").length&&jQuery(".results-container").addClass("nothing_found"),jQuery(".site-main").on("click",".copy_link",(function(){let e=jQuery("<input>"),t=jQuery(this).data("url");jQuery("body").append(e),e.val(t).select(),document.execCommand("copy"),alert("Copied link to clipboard!"),e.remove()})),jQuery(".single-tournament").on("click",".add_to_calendar",(function(e){e.preventDefault(),atcb_action({name:jQuery(this).attr("data-name"),startDate:jQuery(this).attr("data-start-date"),endDate:jQuery(this).attr("data-end-date"),options:["Apple","Google","iCal","Microsoft365","Outlook.com","MicrosoftTeams","Yahoo"],trigger:"click",iCalFileName:"Reminder-Event"})})),jQuery(".single-tournament").on("click",".control",(function(e){e.stopImmediatePropagation(),jQuery("[data-name=draw_tabs] .tab.active").next()[0].click()})),jQuery(".toggle-tour").length){jQuery(".tournaments_table_body").each((function(){let e=jQuery.makeArray(jQuery('.tour-row[data-status="completed"]',this).detach());e.reverse(),jQuery(this).append(e)}));let e=o("tour")?o("tour"):"psa-world-tour",t=jQuery('.status_toggle[data-toggle="status"].active').data("status"),a=jQuery('.gender_toggle[data-toggle="gender"].active').data("gender");jQuery(".toggle-tour[data-selector="+e+"]").addClass("selected").attr("disabled",!0).text("Selected"),jQuery(".toggle-tour:not([data-selector="+e+"])").removeClass("selected").attr("disabled",!1).text("Select"),jQuery(".tour-row").hide(),"all"===a?jQuery(".tour-row[data-sort="+e+"][data-status="+t+"]").show():jQuery(".tour-row[data-sort="+e+"][data-status="+t+"][data-gender="+a+"]").show()}function n(){jQuery(".tours-empty").hide();let e=jQuery(".toggle-tour.selected").data("selector"),t=jQuery(".gender_toggle.active").data("gender"),a=jQuery(".status_toggle.active").data("status");jQuery(".tour-row").hide(),"all"===t?jQuery(".tour-row[data-sort="+e+"][data-status="+a+"]").show():(jQuery(`.tour-row[data-sort="${e}"][data-status="${a}"][data-gender="all"]`).show(),jQuery(`.tour-row[data-sort="${e}"][data-status="${a}"][data-gender="${t}"]`).show()),0===jQuery(".tours table tbody tr:visible").length&&jQuery(".tours-empty").show()}function r(e=""){let t=jQuery(".results_list"),a=jQuery(".results").find(".loader");a.show(),t.empty(),jQuery.get(frontendAjax.resultsApi+(e?`/${e}`:"")).done((function(e){a.hide(),0!==e.length?e.forEach((function(e){t.append(function(e){let t=jQuery(`<div class="result">    <div class="result-header">        <div>${e.tournament} <span class="result-separator">•</span> ${e.round}</div>        <div>${function(e){let t=new Date(e),a={day:"numeric",month:"short",year:"numeric"};return new Intl.DateTimeFormat("en-GB",a).format(t)}(e.date)}</div>    </div>    <div class="result-body"></div></div>`),a=t.find(".result-body"),n=s(e.players[0],e.players[0].games>=e.players[1].games);return a.append(n),n=s(e.players[1],e.players[1].games>=e.players[0].games),a.append(n),t}(e))})):t.html('<h2 style="text-align: center;">No results found.</h2>')})).fail((function(e,n,r){a.hide(),t.html('<h2 style="text-align: center;">Something went wrong. Please try again or contact support.</h2>')}))}function s(e,t=!1){let a=e.scores.concat(Array(5).fill("")).slice(0,5);return jQuery(`<div class="result-row">    <div class="result-mugshot"><img src="/wp-json/afz/v1/player/${e.id}/mugshot/redirect" alt="" /></div>    <div class="result-name">        <span class="full">${e.name}</span>        <span class="short">${function(e){let t=e.split(" "),a="";for(let e=0;e<t.length-1;e++)t[e].length>0&&""!==t[e]&&(a+=t[e].substring(0,1)+".");return(a+" "+t[t.length-1]).trim()}(e.name)}</span>    </div>    <div class="result-flag"><img src="${e.flag}"></div>    <div class="result-final-score ${t?"winner":""}">         ${e.games}    </div>    <div class="result-score">${a[0]}</div>    <div class="result-score">${a[1]}</div>    <div class="result-score">${a[2]}</div>    <div class="result-score">${a[3]}</div>    <div class="result-score">${a[4]}</div></div>`)}function o(e){let t,a,n=window.location.search.substring(1).split("&");for(a=0;a<n.length;a++)if(t=n[a].split("="),t[0]===e)return void 0===t[1]||decodeURIComponent(t[1]);return!1}jQuery(document).on("click",".toggle-tour",(function(e){e.preventDefault();let t=jQuery(this);jQuery(".toggle-tour").removeClass("selected").attr("disabled",!1).text("Select"),t.text("Selected").attr("disabled",!0).addClass("selected"),n()})),jQuery(document).on("click",".status_toggle",(function(e){let t=jQuery(this);t.siblings().removeClass("active"),t.addClass("active"),n()})),jQuery(document).on("click",".gender_toggle",(function(e){let t=jQuery(this);t.siblings().removeClass("active"),t.addClass("active"),n()})),jQuery(document).on("change",'[data-toggle="season-select"]',(async function(e){let t=jQuery(this).val();jQuery(this).attr("disabled",!0),await jQuery.post(frontendAjax.ajaxUrl,{action:"handleAjaxFrontend",task:"getTournamentsTable",security:frontendAjax._nonce,data:{season:t}}).done((function(e){e.success&&e.data.table&&jQuery(".tours").html(e.data.table),jQuery('[data-toggle="season-select"]').attr("disabled",!1),n()})).fail((function(e){jQuery('[data-toggle="season-select"]').attr("disabled",!1),alert("There was an error loading the tournaments table. Please try again later.")}))})),jQuery(".filter").length&&jQuery(".filter").each((function(){new SlimSelect({select:"#"+jQuery(this).attr("id")})})),jQuery("#results_filter_input").length&&(frontendAjax.resultsApi="https://psa-api.ptsportsuite.com/results",jQuery("#results_filter_input").on("change",(function(){r(jQuery(this).val())})),r()),"undefined"!=typeof Cookies&&Cookies.get("NewsletterSignedUp")&&jQuery(".newsletter-form_wrapper").html("<h1>You are already subscribed to the newsletter.</h1>")})),jQuery(document).on("click",".dropdown-submenu-tablet li, .dropdown-submenu-mobile li, .dropdown-submenu-tablet a, .dropdown-submenu-mobile a",(function(e){e.stopPropagation(),jQuery(this).closest(".dropdown-submenu-tablet, .dropdown-submenu-mobile").toggleClass("open"),jQuery(".dropdown-submenu-tablet li, .dropdown-submenu-mobile li").removeClass("current-menu-item"),jQuery(this).closest("li").addClass("current-menu-item")})),jQuery(document).on("click","body",(function(e){jQuery(".dropdown-submenu-tablet, .dropdown-submenu-mobile").removeClass("open")})),jQuery(".remote-post-block").ready((function(){e(".items").flickity({cellAlign:"left",contain:!0,pageDots:!1,prevNextButtons:!1,wrapAround:!1,groupCells:"80%",draggable:!0}),e(".prev").on("click",(function(){e(".items").flickity("previous")})),e(".next").on("click",(function(){e(".items").flickity("next")}))})),jQuery(window).on("load",(function(){if((()=>{let e=jQuery('[data-name=main_tabs] > div[data-initial="true"]');if(e.length)e.first().click();else{let e=jQuery("[data-name=main_tabs] > div");e.length&&e.first().click()}})(),a("tab")){let e=jQuery('.tab[data-id="'+a("tab")+'"]');0===e.length||e.find("a").length>0?e.find("a").length>0?e.find("a").click():jQuery(`[href="#${a("trigger")}"]`).click():e.click(),jQuery(".dropdown-submenu-tablet.open, .dropdown-submenu-mobile.open").removeClass("open")}}))}(jQuery);