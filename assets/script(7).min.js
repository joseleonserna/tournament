!function(e){"use strict";jQuery(document).ready((function(){jQuery(".player-showcase").each((function(e,a){jQuery(a).find(".player-carousel").each((function(e,n){function l(e,a="rankedplayers"){return jQuery(`\n                        <a href="/player/?player_id=${e.Id}">\n                            <div class="player-card">\n                                <div class="header is-text-center">\n                                    <div class="grid rank-mugshot">\n                                        <div class="col-5_sm-7 mugshot-holder">\n                                            <img src="/wp-json/afz/v1/player/${e.Id}/mugshot/redirect" alt="" loading="lazy">\n                                        </div>\n                                        <div class="col-7_sm-5 rank-holder">\n                                            <h1 class="ranking">No. ${"rankedplayers"===a?e["World Ranking"]??"":e["Tour Ranking"]??""}</h1>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="details grid-middle">\n                                    <div class="col-10_sm-8">\n                                        <h5 style="font-size: 1.2em;">${e.Name}</h5>\n                                    </div>\n                                    <div class="col-2_sm-4">\n                                        <img width="35px" src="${e.Flag??""}" alt="" loading="lazy"/>\n                                    </div>\n                                    <div class="col-6_sm-8">\n                                        <label class="label">DOB</label>\n                                        <label>${e.Birthdate??""}</label>\n                                    </div>\n                                    <div class="col-6_sm-4  ">\n                                        <label class="label">COUNTRY</label>\n                                        <label>${e.Country??""}</label>\n                                    </div>\n                                    <div class="col-6_sm-8">\n                                        <label class="label">HEIGHT</label>\n                                        <label>${e.Height??""}</label>\n                                    </div>\n                                    <div class="col-6_sm-4">\n                                        <label class="label">WEIGHT</label>\n                                        <label>${e.Weight??""}</label>\n                                    </div>\n                                </div>\n                            </div>\n                        </a>\n                    `)}jQuery(n).on("load-carousel",(function(){let e=Flickity.data(n);e?(e.reloadCells(),e.select(0)):(e=new Flickity(n,{cellAlign:"left",contain:!0,pageDots:!1,prevNextButtons:!1,wrapAround:!1,groupCells:"80%"}),a.querySelector(".arrow-navigation .next").addEventListener("click",(a=>{a.preventDefault(),e.next()})),a.querySelector(".arrow-navigation .previous").addEventListener("click",(a=>{a.preventDefault(),e.previous()})))})),jQuery(n).on("change-url",(function(e,a){jQuery(n).addClass("is-loading");let r=jQuery(n).find(".flickity-slider");r.length||(r=jQuery(n)),r.empty(),jQuery.get(a.url).then((function(e){for(let n=0;n<20;n++){let t=e[n];r.append(l(t,a.tournament))}jQuery(n).removeClass("is-loading"),jQuery(n).trigger("load-carousel"),e=null})).catch((function(e){jQuery(n).removeClass("is-loading"),console.error("Failed to fetch players: ",e)}))})),jQuery(n).trigger("change-url",{url:n.getAttribute("data-url"),tournament:n.getAttribute("data-tournament"),filter:n.getAttribute("data-filter")})})),jQuery(a).find(".player-list").each((function(e,a){function n(e,a="rankedplayers",n=!1){let l=jQuery(`\n                        <tr>\n                            <td class="rank">\n                                ${"rankedplayers"===a?e["World Ranking"]??"":e["Tour Ranking"]??""}\n                            </td>\n                            <td class="name">\n                                <img src="/wp-json/afz/v1/player/${e.Id}/mugshot/redirect" class="mugshot" alt="" loading="lazy">\n                                <a class="profile-link" href="/player/?player_id=${e.Id}">\n                                    ${e.Name}\n                                </a>\n                                <div class="qualified ml-auto">\n                                    ${n?'<a data-tooltip="Qualified for World Tour Finals" class="profile-link" href="/player/?player_id='+e.Id+'">Q</a>':""}\n                                </div>\n                                <img width="25px" class="flag" src="${e.Flag??""}" alt="" loading="lazy"/>\n                            </td>\n                            <td class="tournaments">\n                                ${"rankedplayers"===a?e.Tournaments??"":e["Tour Tournaments"]??""}\n                            </td>\n                            <td class="total">\n                                <a class="profile-link" href="/player/?player_id=${e.Id}#statistics">\n                                    ${"rankedplayers"===a?Math.floor(Number(e["Average Points"]??"0")):Math.floor(Number(e["Tour Points"]??"0"))}\n                                </a>\n                            </td>\n                        </tr>\n                    `),r=Number("rankedplayers"===a?e["World Ranking Change"]??"0":e["Tour Ranking Change"]??"0");return(r>0||r<0)&&l.find(".rank").append(""+(r>0?'<span class="up">▲ <span>'+Math.abs(r)+"</span></span>":'<span class="down">▼ <span>'+Math.abs(r)+"</span></span>")),l}jQuery(a).on("change-url",(function(e,l){jQuery(a).addClass("is-loading");let r=jQuery(a).find("tbody");r.empty(),jQuery(a).siblings(".load-more").remove(),jQuery.get(l.url).then((function(e){let t=0,s=String(jQuery(a).data("qualified")).split(",");for(let a=0;a<20;a++){let t=e[a];r.append(n(t,l.tournament,s.includes(t.Id)))}jQuery(a).removeClass("is-loading"),t+=20;let i=jQuery(`\n                            <div class="load-more is-text-center p-3">\n                                <a href="${l.url}" class="button">Load More</a>\n                            </div>\n                        `);i.on("click",(function(s){s.preventDefault();for(let a=t;a<t+20;a++)if(e[a]){let t=e[a];r.append(n(t,l.tournament))}t+=20,t>=e.length&&jQuery(a).find(".load-more").remove()})),i.insertAfter(a)})).catch((function(e){jQuery(a).removeClass("is-loading"),console.error("Failed to fetch players: ",e)}))})),jQuery(a).trigger("change-url",{url:a.getAttribute("data-url"),tournament:a.getAttribute("data-tournament"),filter:a.getAttribute("data-filter")})}))}))}))}(jQuery);